CREATE OR REPLACE FUNCTION bookCopiesAtAllSharpstown()
RETURNS TABLE(Branch_ID INT, Branch_Name varchar, Number_of_Copies INT, Book_Title varchar) AS $$
BEGIN
RETURN QUERY
SELECT copies.book_copies_BranchID, branch.library_branch_BranchName, copies.book_copies_No_Of_Copies, book.book_Title
FROM tbl_book_copies AS copies
INNER JOIN tbl_book AS book ON copies.book_copies_BookID = book.book_BookID
INNER JOIN tbl_library_branch AS branch ON copies.book_copies_BranchID = branch.library_branch_BranchID
WHERE book.book_Title = 'The Lost Tribe' AND branch.library_branch_BranchName = 'Sharpstown';
END; $$ LANGUAGE 'plpgsql';
